<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todos os Dados - Sistema de Cadastro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body id="body-todos">
    <div class="container">
        <header>
            <div>
                <h1><i class="fas fa-table"></i> Todos os Dados</h1>
                <div class="user-badge">
                    <i class="fas fa-user"></i>
                    <span id="currentUser"></span>
                </div>
            </div>
            <nav>
                <a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
                <a href="adicionar-dados.html"><i class="fas fa-plus-circle"></i> Adicionar</a>
                <a href="backup.html"><i class="fas fa-database"></i> Backup</a>
                <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Sair</a>
            </nav>
        </header>
        
        <div class="content">
            <div class="card">
                <h2>Locais Cadastrados</h2>
                
                <div class="filter-section">
                    <div class="search-box">
                        <input type="text" id="pesquisaDados" placeholder="Buscar por nome, endereço, responsável..." onkeyup="filtrarDados()">
                        <button onclick="limparPesquisaDados()"><i class="fas fa-times"></i> Limpar</button>
                    </div>
                    
                    <!-- REMOVIDOS: Filtros de dia e horário que não fazem sentido para locais -->
                </div>
                
                <div class="table-container">
                    <table id="tabelaLocais">
                        <thead>
                            <tr>
                                <th width="50">#</th>
                                <th>Nome do Local</th>
                                <th>Endereço</th>
                                <th>Responsável</th>
                                <th>Eventos</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Os dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="detalhesModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitulo">Detalhes do Local</h2>
            
            <div class="modal-filters">
                <div class="search-box">
                    <input type="text" id="pesquisaEventosModal" placeholder="Buscar eventos, escolas, responsáveis..." onkeyup="filtrarEventosModal()">
                    <button onclick="limparPesquisaEventosModal()"><i class="fas fa-times"></i> Limpar</button>
                </div>
                
                <select id="filtroDiaModal" onchange="filtrarEventosModal()">
                    <option value="">Todos os dias</option>
                    <option value="Segunda-feira">Segunda</option>
                    <option value="Terça-feira">Terça</option>
                    <option value="Quarta-feira">Quarta</option>
                    <option value="Quinta-feira">Quinta</option>
                    <option value="Sexta-feira">Sexta</option>
                    <option value="Sábado">Sábado</option>
                    <option value="Domingo">Domingo</option>
                </select>
                
                <!-- NOVOS FILTROS DINÂMICOS -->
                <select id="filtroEscola" onchange="filtrarEventosModal()">
                    <option value="">Todas as escolas/grupos</option>
                    <!-- Opções serão preenchidas dinamicamente -->
                </select>
                
                <select id="filtroResponsavel" onchange="filtrarEventosModal()">
                    <option value="">Todos os responsáveis</option>
                    <!-- Opções serão preenchidas dinamicamente -->
                </select>
            </div>
            
            <div id="modalConteudo">
                <!-- Conteúdo será preenchido dinamicamente -->
            </div>
        </div>
    </div>

    <div id="loadingScreen" class="loading-screen loading-hidden">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Carregando...</p>
        </div>
    </div>

    <!-- Firebase App (o core do Firebase) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
